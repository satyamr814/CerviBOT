<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cervical Health Risk Assessment Chatbot</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Noto Sans Devanagari', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      width: 100%;
      max-width: 800px;
      height: 90vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 120px 20px 120px;
      text-align: center;
      position: relative;
      min-height: 100px;
    }

    .lang-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.98) 100%);
      border: 2px solid rgba(255, 255, 255, 0.8);
      color: #667eea;
      padding: 12px 22px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 700;
      font-size: 15px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      z-index: 10;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23667eea' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 18px center;
      padding-right: 45px;
    }

    .lang-toggle:hover {
      background: linear-gradient(135deg, white 0%, #f8f9fa 100%);
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      border-color: white;
    }

    .lang-toggle option {
      color: #667eea;
      background: white;
      padding: 12px;
      font-weight: 600;
    }

    .header h1 {
      font-size: 24px;
      margin-bottom: 5px;
      margin-top: 0;
      padding: 0 20px;
    }

    .header p {
      opacity: 0.9;
      font-size: 14px;
      margin: 0;
      padding: 0 20px;
    }

    .chat-container {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #f8f9fa;
    }

    .message {
      margin-bottom: 15px;
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .bot-message {
      display: flex;
      align-items: flex-start;
    }

    .bot-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .bot-text {
      background: white;
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 70%;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      line-height: 1.5;
    }

    .user-message {
      display: flex;
      justify-content: flex-end;
      align-items: flex-start;
    }

    .user-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 70%;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .result-box {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-top: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .risk-badge {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 14px;
      margin: 10px 0;
    }

    .risk-low { background: #10b981; color: white; }
    .risk-medium { background: #f59e0b; color: white; }
    .risk-high { background: #ef4444; color: white; }

    .probability-gauge {
      width: 100%;
      height: 30px;
      background: #e5e7eb;
      border-radius: 15px;
      overflow: hidden;
      margin: 15px 0;
      position: relative;
    }

    .probability-fill {
      height: 100%;
      transition: width 0.5s ease;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 12px;
    }

    .question-area {
      padding: 20px;
      background: white;
      border-top: 1px solid #e5e7eb;
    }

    .options-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .option-btn {
      padding: 12px 20px;
      border: 2px solid #667eea;
      background: white;
      color: #667eea;
      border-radius: 25px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .option-btn:hover {
      background: #667eea;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .input-group {
      display: flex;
      gap: 12px;
      margin-top: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    .number-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 25px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.3s;
    }

    .number-input:focus {
      border-color: #667eea;
    }

    .submit-btn {
      padding: 14px 32px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 700;
      font-size: 16px;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      min-width: 100px;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.5);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .explain-btn {
      margin-top: 15px;
      padding: 14px 28px;
      background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 700;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(107, 114, 128, 0.4);
      min-width: 140px;
    }

    .explain-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(107, 114, 128, 0.5);
    }

    .progress-indicator {
      text-align: center;
      color: #6b7280;
      font-size: 12px;
      margin-top: 10px;
    }

    .voice-btn {
      padding: 14px 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 22px;
      font-weight: 700;
      margin-left: 12px;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
      min-width: 60px;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .voice-btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.6);
    }

    .voice-btn:active {
      transform: translateY(-1px) scale(1.02);
    }

    .voice-btn.recording {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      animation: pulse 1s infinite;
      box-shadow: 0 5px 15px rgba(239, 68, 68, 0.6);
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .header-buttons {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      gap: 12px;
      z-index: 10;
    }

    .header-btn {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.98) 100%);
      border: 2px solid rgba(255, 255, 255, 0.8);
      color: #667eea;
      padding: 12px 22px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 700;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .header-btn:hover {
      background: linear-gradient(135deg, white 0%, #f8f9fa 100%);
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      border-color: white;
    }

    .header-btn:active {
      transform: translateY(0) scale(0.98);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 20px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-buttons">
        <button class="header-btn" onclick="showProfile()">üë§ Profile</button>
        <button class="header-btn" onclick="showHistory()">üìã History</button>
      </div>
      <select class="lang-toggle" id="langToggle">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
        <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
        <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
        <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
      </select>
      <h1 id="headerTitle">üè• Cervical Health Risk Assessment</h1>
      <p id="headerSubtitle">Answer a few questions to assess your risk level</p>
    </div>

    <div class="chat-container" id="conversation"></div>

    <div class="question-area" id="question-area"></div>
  </div>

  <script>
    // Translations
    const translations = {
      en: {
        title: 'üè• Cervical Health Risk Assessment',
        subtitle: 'Answer a few questions to assess your risk level',
        langButton: '‡§π‡§ø‡§Ç‡§¶‡•Ä',
        hello: "Hello! I'm here to help assess your cervical health risk. Let's start with a few questions.",
        analyzing: "Thanks for your answers! Analyzing your risk...",
        riskResult: 'Risk Assessment Result',
        probability: 'Probability',
        label: 'Label',
        confidence: 'Confidence',
        whyPrediction: 'Why this prediction?',
        next: 'Next',
        questionOf: (c, t) => `Question ${c} of ${t}`,
        questions: [
          { key: 'Age', text: 'What is your age?' },
          { key: 'Num_of_sexual_partners', text: 'How many sexual partners have you had?' },
          { key: 'First_sex_age', text: 'At what age did you first have sexual intercourse?' },
          { key: 'Num_of_pregnancies', text: 'How many pregnancies have you had?' },
          { key: 'Smokes_years', text: 'How many years have you been smoking? (Enter 0 if you don\'t smoke)' },
          { key: 'Hormonal_contraceptives', text: 'Are you currently using hormonal contraceptives?', options: ['Yes', 'No'] },
          { key: 'Hormonal_contraceptives_years', text: 'If yes, for how many years? (Enter 0 if not applicable)', conditional: 'Hormonal_contraceptives', conditionalValue: 'Yes' },
          { key: 'STDs_HIV', text: 'What is your HIV status?', options: ['No', 'Yes'] },
          { key: 'Pain_during_intercourse', text: 'Do you experience pain during intercourse?', options: ['Yes', 'No'] },
          { key: 'Vaginal_discharge_type', text: 'What type of vaginal discharge do you experience?', options: ['None', 'watery', 'thick', 'bloody'] },
          { key: 'Vaginal_discharge_color', text: 'What color is your vaginal discharge?', options: ['normal', 'pink', 'pale', 'bloody'] },
          { key: 'Vaginal_bleeding_timing', text: 'When do you experience abnormal vaginal bleeding?', options: ['None', 'Between periods', 'After sex', 'After menopause'] }
        ],
        riskLow: 'Low Risk',
        riskMedium: 'Medium Risk',
        riskHigh: 'High Risk',
        adviceLow: 'Low risk ‚Äî routine screening as per local guidelines is recommended.',
        adviceMedium: 'Medium risk ‚Äî consider scheduling a clinical check-up and follow-up screening.',
        adviceHigh: 'High risk ‚Äî seek urgent clinical evaluation and further diagnostic testing.',
        enterNumber: 'Enter a number',
        saveResult: 'Save Result',
        downloadPDF: 'Download PDF'
      },
      hi: {
        title: 'üè• ‡§ó‡§∞‡•ç‡§≠‡§æ‡§∂‡§Ø ‡§ó‡•ç‡§∞‡•Ä‡§µ‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®',
        subtitle: '‡§Ö‡§™‡§®‡•á ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§§‡§∞ ‡§ï‡§æ ‡§Ü‡§ï‡§≤‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•Å‡§õ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á‡§Ç',
        langButton: 'English',
        hello: '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§ó‡§∞‡•ç‡§≠‡§æ‡§∂‡§Ø ‡§ó‡•ç‡§∞‡•Ä‡§µ‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§ï‡§æ ‡§Ü‡§ï‡§≤‡§® ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Ç ‡§π‡•Ç‡§Ç‡•§ ‡§Ü‡§á‡§è ‡§ï‡•Å‡§õ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç‡•§',
        analyzing: '‡§Ü‡§™‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™‡§ï‡•á ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...',
        riskResult: '‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ',
        probability: '‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ',
        label: '‡§≤‡•á‡§¨‡§≤',
        confidence: '‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏',
        whyPrediction: '‡§Ø‡§π ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä ‡§ï‡•ç‡§Ø‡•ã‡§Ç?',
        next: '‡§Ö‡§ó‡§≤‡§æ',
        questionOf: (c, t) => `‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${c} ‡§Æ‡•á‡§Ç ‡§∏‡•á ${t}`,
        questions: [
          { key: 'Age', text: '‡§Ü‡§™‡§ï‡•Ä ‡§â‡§Æ‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?' },
          { key: 'Num_of_sexual_partners', text: '‡§Ü‡§™‡§ï‡•á ‡§ï‡§ø‡§§‡§®‡•á ‡§Ø‡•å‡§® ‡§∏‡§æ‡§•‡•Ä ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?' },
          { key: 'First_sex_age', text: '‡§Ü‡§™‡§®‡•á ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§ï‡§ø‡§∏ ‡§â‡§Æ‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§Ø‡•å‡§® ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§¨‡§®‡§æ‡§è?' },
          { key: 'Num_of_pregnancies', text: '‡§Ü‡§™‡§ï‡•Ä ‡§ï‡§ø‡§§‡§®‡•Ä ‡§ó‡§∞‡•ç‡§≠‡§æ‡§µ‡§∏‡•ç‡§•‡§æ‡§è‡§Ç ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç?' },
          { key: 'Smokes_years', text: '‡§Ü‡§™ ‡§ï‡§ø‡§§‡§®‡•á ‡§µ‡§∞‡•ç‡§∑‡•ã‡§Ç ‡§∏‡•á ‡§ß‡•Ç‡§Æ‡•ç‡§∞‡§™‡§æ‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç? (‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§ß‡•Ç‡§Æ‡•ç‡§∞‡§™‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§§‡•ã 0 ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç)' },
          { key: 'Hormonal_contraceptives', text: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§®‡§≤ ‡§ó‡§∞‡•ç‡§≠‡§®‡§ø‡§∞‡•ã‡§ß‡§ï ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?', options: ['‡§π‡§æ‡§Å', '‡§®‡§π‡•Ä‡§Ç'] },
          { key: 'Hormonal_contraceptives_years', text: '‡§Ø‡§¶‡§ø ‡§π‡§æ‡§Å, ‡§§‡•ã ‡§ï‡§ø‡§§‡§®‡•á ‡§µ‡§∞‡•ç‡§∑‡•ã‡§Ç ‡§∏‡•á? (‡§Ø‡§¶‡§ø ‡§≤‡§æ‡§ó‡•Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡§æ ‡§§‡•ã 0 ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç)', conditional: 'Hormonal_contraceptives', conditionalValue: '‡§π‡§æ‡§Å' },
          { key: 'STDs_HIV', text: '‡§Ü‡§™‡§ï‡•Ä HIV ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?', options: ['‡§®‡§π‡•Ä‡§Ç', '‡§π‡§æ‡§Å'] },
          { key: 'Pain_during_intercourse', text: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§Ç‡§≠‡•ã‡§ó ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§¶‡§∞‡•ç‡§¶ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?', options: ['‡§π‡§æ‡§Å', '‡§®‡§π‡•Ä‡§Ç'] },
          { key: 'Vaginal_discharge_type', text: '‡§Ü‡§™‡§ï‡•ã ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§Ø‡•ã‡§®‡§ø ‡§∏‡•ç‡§∞‡§æ‡§µ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?', options: ['‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç', '‡§™‡§æ‡§®‡•Ä ‡§ú‡•à‡§∏‡§æ', '‡§ó‡§æ‡§¢‡§º‡§æ', '‡§ñ‡•Ç‡§®‡•Ä'] },
          { key: 'Vaginal_discharge_color', text: '‡§Ü‡§™‡§ï‡•á ‡§Ø‡•ã‡§®‡§ø ‡§∏‡•ç‡§∞‡§æ‡§µ ‡§ï‡§æ ‡§∞‡§Ç‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?', options: ['‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø', '‡§ó‡•Å‡§≤‡§æ‡§¨‡•Ä', '‡§™‡•Ä‡§≤‡§æ', '‡§ñ‡•Ç‡§®‡•Ä'] },
          { key: 'Vaginal_bleeding_timing', text: '‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Ø‡•ã‡§®‡§ø ‡§∞‡§ï‡•ç‡§§‡§∏‡•ç‡§∞‡§æ‡§µ ‡§ï‡§¨ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?', options: ['‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç', '‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§¨‡•Ä‡§ö', '‡§∏‡§Ç‡§≠‡•ã‡§ó ‡§ï‡•á ‡§¨‡§æ‡§¶', '‡§∞‡§ú‡•ã‡§®‡§ø‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡•á ‡§¨‡§æ‡§¶'] }
        ],
        riskLow: '‡§ï‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ',
        riskMedium: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ',
        riskHigh: '‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡§ø‡§Æ',
        adviceLow: '‡§ï‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‚Äî ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§',
        adviceMedium: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‚Äî ‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§ú‡§æ‡§Ç‡§ö ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§∂‡•á‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§',
        adviceHigh: '‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‚Äî ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§î‡§∞ ‡§Ü‡§ó‡•á ‡§ï‡•Ä ‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡§æ‡§è‡§Ç‡•§',
        enterNumber: '‡§è‡§ï ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
        saveResult: '‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∏‡§π‡•á‡§ú‡•á‡§Ç',
        downloadPDF: 'PDF ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç'
      },
      ta: {
        title: 'üè• ‡Æï‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æ™‡Øç‡Æ™‡Øà ‡Æï‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÄ‡Æü‡ØÅ',
        subtitle: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æø‡Æü ‡Æö‡Æø‡Æ≤ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ™‡Æ§‡Æø‡Æ≤‡Æ≥‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç',
        hello: '‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç! ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æ™‡Øç‡Æ™‡Øà ‡Æï‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡Øà ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æø‡Æü ‡Æ®‡Ææ‡Æ©‡Øç ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç. ‡Æö‡Æø‡Æ≤ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ‡Æµ‡Øã‡ÆÆ‡Øç.',
        analyzing: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ§‡Æø‡Æ≤‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡Æ©‡Øç‡Æ±‡Æø! ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...',
        riskResult: '‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÄ‡Æü‡Øç‡Æü‡ØÅ ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ',
        probability: '‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æ§‡Æï‡Æµ‡ØÅ',
        label: '‡Æ≤‡Øá‡Æ™‡Æø‡Æ≥‡Øç',
        confidence: '‡Æ®‡ÆÆ‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Øà',
        whyPrediction: '‡Æá‡Æ®‡Øç‡Æ§ ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æè‡Æ©‡Øç?',
        next: '‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ',
        questionOf: (c, t) => `‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø ${c} / ${t}`,
        riskLow: '‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ',
        riskMedium: '‡Æ®‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ∞ ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ',
        riskHigh: '‡Æâ‡ÆØ‡Æ∞‡Øç ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ',
        adviceLow: '‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‚Äî ‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÇ‡Æ∞‡Øç ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç‡Æï‡Æ≥‡Æø‡Æ©‡Øç‡Æ™‡Æü‡Æø ‡Æµ‡Æ¥‡Æï‡Øç‡Æï‡ÆÆ‡Ææ‡Æ© ‡Æ§‡Æø‡Æ∞‡Øà‡ÆØ‡Æø‡Æü‡Æ≤‡Øç ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ.',
        adviceMedium: '‡Æ®‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ∞ ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‚Äî ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ ‡Æ™‡Æ∞‡Æø‡Æö‡Øã‡Æ§‡Æ©‡Øà ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ§‡Æø‡Æ∞‡Øà‡ÆØ‡Æø‡Æü‡Æ≤‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Æø‡Æü‡ØÅ‡Æµ‡Æ§‡Øà‡Æï‡Øç ‡Æï‡Æµ‡Æ©‡Æø‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
        adviceHigh: '‡Æâ‡ÆØ‡Æ∞‡Øç ‡ÆÜ‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ ‚Äî ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÄ‡Æü‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æö‡Øã‡Æ§‡Æ©‡Øà‡Æï‡Æ≥‡Øà ‡Æ®‡Ææ‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
        enterNumber: '‡Æí‡Æ∞‡ØÅ ‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç',
        saveResult: '‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡Øà ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç',
        downloadPDF: 'PDF ‡Æ™‡Æ§‡Æø‡Æµ‡Æø‡Æ±‡Æï‡Øç‡Æï'
      },
      te: {
        title: 'üè• ‡∞ó‡∞∞‡±ç‡∞≠‡∞æ‡∞∂‡∞Ø ‡∞Æ‡±Ü‡∞° ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ',
        subtitle: '‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶ ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø‡∞®‡∞ø ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞µ‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ï‡±ä‡∞®‡±ç‡∞®‡∞ø ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡∞ï‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞Ç ‡∞á‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø',
        hello: '‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç! ‡∞Æ‡±Ä ‡∞ó‡∞∞‡±ç‡∞≠‡∞æ‡∞∂‡∞Ø ‡∞Æ‡±Ü‡∞° ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞µ‡±á‡∞Ø‡∞°‡∞Ç‡∞≤‡±ã ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞®‡±á‡∞®‡±Å ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞â‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å. ‡∞ï‡±ä‡∞®‡±ç‡∞®‡∞ø ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡∞§‡±ã ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞¶‡±ç‡∞¶‡∞æ‡∞Ç.',
        analyzing: '‡∞Æ‡±Ä ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞æ‡∞≤‡∞ï‡±Å ‡∞ß‡∞®‡±ç‡∞Ø‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±Å! ‡∞Æ‡±Ä ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...',
        riskResult: '‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç',
        probability: '‡∞∏‡∞Ç‡∞≠‡∞æ‡∞µ‡±ç‡∞Ø‡∞§',
        label: '‡∞≤‡±á‡∞¨‡±Å‡∞≤‡±ç',
        confidence: '‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞∏‡∞Ç',
        whyPrediction: '‡∞à ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞é‡∞Ç‡∞¶‡±Å‡∞ï‡±Å?',
        next: '‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§',
        questionOf: (c, t) => `‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ${c} / ${t}`,
        riskLow: '‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç',
        riskMedium: '‡∞Æ‡∞ß‡±ç‡∞Ø‡∞∏‡±ç‡∞• ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç',
        riskHigh: '‡∞Ö‡∞ß‡∞ø‡∞ï ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç',
        adviceLow: '‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç ‚Äî ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ó‡∞¶‡∞∞‡±ç‡∞∂‡∞ï‡∞æ‡∞≤ ‡∞™‡±ç‡∞∞‡∞ï‡∞æ‡∞∞‡∞Ç ‡∞∞‡±Ç‡∞ü‡±Ä‡∞®‡±ç ‡∞∏‡±ç‡∞ï‡±ç‡∞∞‡±Ä‡∞®‡∞ø‡∞Ç‡∞ó‡±ç ‡∞∏‡∞ø‡∞´‡∞æ‡∞∞‡±ç‡∞∏‡±Å ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø.',
        adviceMedium: '‡∞Æ‡∞ß‡±ç‡∞Ø‡∞∏‡±ç‡∞• ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç ‚Äî ‡∞ï‡±ç‡∞≤‡∞ø‡∞®‡∞ø‡∞ï‡∞≤‡±ç ‡∞ö‡±Ü‡∞ï‡±ç-‡∞Ö‡∞™‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞´‡∞æ‡∞≤‡±ã-‡∞Ö‡∞™‡±ç ‡∞∏‡±ç‡∞ï‡±ç‡∞∞‡±Ä‡∞®‡∞ø‡∞Ç‡∞ó‡±ç ‡∞∑‡±Ü‡∞°‡±ç‡∞Ø‡±Ç‡∞≤‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞™‡∞∞‡∞ø‡∞ó‡∞£‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.',
        adviceHigh: '‡∞Ö‡∞ß‡∞ø‡∞ï ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞Ç ‚Äî ‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞ï‡±ç‡∞≤‡∞ø‡∞®‡∞ø‡∞ï‡∞≤‡±ç ‡∞Æ‡±Ç‡∞≤‡±ç‡∞Ø‡∞æ‡∞Ç‡∞ï‡∞®‡∞Ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞∞‡±ã‡∞ó‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞£ ‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑‡∞≤‡∞®‡±Å ‡∞ï‡±ã‡∞∞‡∞Ç‡∞°‡∞ø.',
        enterNumber: '‡∞í‡∞ï ‡∞∏‡∞Ç‡∞ñ‡±ç‡∞Ø‡∞®‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø',
        saveResult: '‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø',
        downloadPDF: 'PDF ‡∞°‡±å‡∞®‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç'
      },
      bn: {
        title: 'üè• ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®',
        subtitle: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø‡¶∞ ‡¶∏‡ßç‡¶§‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶Ø‡¶º‡ßá‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶®',
        hello: '‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞! ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶õ‡¶ø‡•§ ‡¶ï‡¶Ø‡¶º‡ßá‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶ø‡•§',
        analyzing: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶ó‡ßÅ‡¶≤‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...',
        riskResult: '‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶® ‡¶´‡¶≤‡¶æ‡¶´‡¶≤',
        probability: '‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡¶æ',
        label: '‡¶≤‡ßá‡¶¨‡ßá‡¶≤',
        confidence: '‡¶Ü‡¶§‡ßç‡¶Æ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏',
        whyPrediction: '‡¶è‡¶á ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶∏ ‡¶ï‡ßá‡¶®?',
        next: '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ',
        questionOf: (c, t) => `‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${c} / ${t}`,
        riskLow: '‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø',
        riskMedium: '‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø',
        riskHigh: '‡¶â‡¶ö‡ßç‡¶ö ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø',
        adviceLow: '‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‚Äî ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßÄ‡¶Ø‡¶º ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßÄ‡¶®‡¶ø‡¶Ç ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§',
        adviceMedium: '‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‚Äî ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶ö‡ßá‡¶ï-‡¶Ü‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶´‡¶≤‡ßã-‡¶Ü‡¶™ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßÄ‡¶®‡¶ø‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶¨‡¶ø‡¶¨‡ßá‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
        adviceHigh: '‡¶â‡¶ö‡ßç‡¶ö ‡¶ù‡ßÅ‡¶Å‡¶ï‡¶ø ‚Äî ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶∞‡¶ì ‡¶°‡¶æ‡¶Ø‡¶º‡¶æ‡¶ó‡¶®‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ö‡¶æ‡¶á‡•§',
        enterNumber: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®',
        saveResult: '‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®',
        downloadPDF: 'PDF ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°'
      },
      mr: {
        title: 'üè• ‡§ó‡§∞‡•ç‡§≠‡§æ‡§∂‡§Ø ‡§ó‡•ç‡§∞‡•Ä‡§µ‡§æ ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§ú‡•ã‡§ñ‡•Ä‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®',
        subtitle: '‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§ú‡•ã‡§ñ‡•Ä‡§Æ ‡§™‡§æ‡§§‡§≥‡•Ä‡§ö‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡§æ‡§π‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§Ç‡§ö‡•Ä ‡§â‡§§‡•ç‡§§‡§∞‡•á ‡§¶‡•ç‡§Ø‡§æ',
        hello: '‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§ó‡§∞‡•ç‡§≠‡§æ‡§∂‡§Ø ‡§ó‡•ç‡§∞‡•Ä‡§µ‡§æ ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§ú‡•ã‡§ñ‡•Ä‡§Æ‡§ö‡•á ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ø‡•á‡§•‡•á ‡§Ü‡§π‡•á. ‡§ö‡§≤‡§æ ‡§ï‡§æ‡§π‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§Ç‡§∏‡§π ‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§ ‡§ï‡§∞‡•Ç‡§Ø‡§æ.',
        analyzing: '‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§ú‡•ã‡§ñ‡•Ä‡§Æ‡§ö‡•á ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á‡§≤‡•á ‡§ú‡§æ‡§§ ‡§Ü‡§π‡•á...',
        riskResult: '‡§ú‡•ã‡§ñ‡•Ä‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ',
        probability: '‡§∏‡§Ç‡§≠‡§æ‡§µ‡•ç‡§Ø‡§§‡§æ',
        label: '‡§≤‡•á‡§¨‡§≤',
        confidence: '‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏',
        whyPrediction: '‡§π‡•á ‡§Ö‡§Ç‡§¶‡§æ‡§ú ‡§ï‡§æ?',
        next: '‡§™‡•Å‡§¢‡•á',
        questionOf: (c, t) => `‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${c} / ${t}`,
        riskLow: '‡§ï‡§Æ‡•Ä ‡§ú‡•ã‡§ñ‡•Ä‡§Æ',
        riskMedium: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡•Ä‡§Æ',
        riskHigh: '‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡•Ä‡§Æ',
        adviceLow: '‡§ï‡§Æ‡•Ä ‡§ú‡•ã‡§ñ‡•Ä‡§Æ ‚Äî ‡§∏‡•ç‡§•‡§æ‡§®‡§ø‡§ï ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ï ‡§§‡§§‡•ç‡§§‡•ç‡§µ‡§æ‡§Ç‡§®‡•Å‡§∏‡§æ‡§∞ ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§ø‡§Ç‡§ó ‡§∂‡§ø‡§´‡§æ‡§∞‡§∏ ‡§ï‡•á‡§≤‡•Ä ‡§ú‡§æ‡§§‡•á.',
        adviceMedium: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡•Ä‡§Æ ‚Äî ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§Ü‡§£‡§ø ‡§´‡•â‡§≤‡•ã-‡§Ö‡§™ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§ø‡§Ç‡§ó ‡§∂‡•á‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡§æ.',
        adviceHigh: '‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡•Ä‡§Æ ‚Äî ‡§§‡§æ‡§§‡§°‡•Ä‡§®‡•á ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§Ü‡§£‡§ø ‡§™‡•Å‡§¢‡•Ä‡§≤ ‡§®‡§ø‡§¶‡§æ‡§® ‡§ö‡§æ‡§ö‡§£‡•ç‡§Ø‡§æ ‡§ò‡•ç‡§Ø‡§æ.',
        enterNumber: '‡§è‡§ï ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ',
        saveResult: '‡§®‡§ø‡§ï‡§æ‡§≤ ‡§ú‡§§‡§® ‡§ï‡§∞‡§æ',
        downloadPDF: 'PDF ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ'
      }
    };

    // Option value mappings (Hindi to English)
    const optionMapping = {
      hi: {
        '‡§π‡§æ‡§Å': 'Yes',
        '‡§®‡§π‡•Ä‡§Ç': 'No',
        '‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç': 'None',
        '‡§™‡§æ‡§®‡•Ä ‡§ú‡•à‡§∏‡§æ': 'watery',
        '‡§ó‡§æ‡§¢‡§º‡§æ': 'thick',
        '‡§ñ‡•Ç‡§®‡•Ä': 'bloody',
        '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø': 'normal',
        '‡§ó‡•Å‡§≤‡§æ‡§¨‡•Ä': 'pink',
        '‡§™‡•Ä‡§≤‡§æ': 'pale',
        '‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§¨‡•Ä‡§ö': 'Between periods',
        '‡§∏‡§Ç‡§≠‡•ã‡§ó ‡§ï‡•á ‡§¨‡§æ‡§¶': 'After sex',
        '‡§∞‡§ú‡•ã‡§®‡§ø‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡•á ‡§¨‡§æ‡§¶': 'After menopause'
      },
      en: {}
    };

    let currentLang = 'en';
    const state = {
      Age: null,
      Num_of_sexual_partners: null,
      First_sex_age: null,
      Num_of_pregnancies: null,
      Smokes_years: 0,
      Hormonal_contraceptives: 'No',
      Hormonal_contraceptives_years: 0,
      STDs_HIV: 'No',
      Pain_during_intercourse: 'No',
      Vaginal_discharge_type: 'None',
      Vaginal_discharge_color: 'normal',
      Vaginal_bleeding_timing: 'None'
    };

    const conversation = document.getElementById('conversation');
    const qArea = document.getElementById('question-area');
    const langToggle = document.getElementById('langToggle');
    const headerTitle = document.getElementById('headerTitle');
    const headerSubtitle = document.getElementById('headerSubtitle');

    function t(key, ...args) {
      const langDict = translations[currentLang] || translations['en'];
      const trans = langDict[key];
      if (trans === undefined) {
        // Fallback to English if translation missing
        return translations['en'][key] || key;
      }
      return typeof trans === 'function' ? trans(...args) : trans;
    }

    // Debounce function for performance
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Optimized scroll with debounce
    const optimizedScroll = debounce(() => {
      optimizedScroll();
    }, 50);

    function switchLanguage() {
      currentLang = langToggle.value;
      headerTitle.textContent = t('title');
      headerSubtitle.textContent = t('subtitle');
      
      // Clear and restart conversation
      conversation.innerHTML = '';
      qArea.innerHTML = '';
      stepIndex = 0;
      bot(t('hello'));
      askNext();
    }

    langToggle.addEventListener('change', switchLanguage);

    function bot(msg, isResult = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message bot-message';
      
      const avatar = document.createElement('div');
      avatar.className = 'bot-avatar';
      avatar.textContent = 'ü§ñ';
      
      const text = document.createElement('div');
      text.className = 'bot-text';
      text.innerHTML = msg;
      
      messageDiv.appendChild(avatar);
      messageDiv.appendChild(text);
      conversation.appendChild(messageDiv);
      
      if (isResult) {
        const resultBox = document.createElement('div');
        resultBox.className = 'result-box';
        resultBox.innerHTML = msg;
        text.innerHTML = '';
        text.appendChild(resultBox);
      }
      
      optimizedScroll();
    }

    function user(msg) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message user-message';
      
      const text = document.createElement('div');
      text.className = 'user-text';
      text.textContent = msg;
      
      messageDiv.appendChild(text);
      conversation.appendChild(messageDiv);
      optimizedScroll();
    }

    let stepIndex = 0;
    let currentInput = null;

    function askNext() {
      const steps = t('questions');
      if (stepIndex >= steps.length) {
        bot(t('analyzing'));
        qArea.innerHTML = '<div class="loading"></div>';
        sendToBackend();
        return;
      }

      const s = steps[stepIndex];
      
      // Skip conditional questions if condition not met
      if (s.conditional) {
        const conditionValue = s.conditionalValue;
        const stateValue = state[s.conditional];
        // Map Hindi value to English if needed
        const mappedValue = currentLang === 'hi' && optionMapping.hi[stateValue] ? optionMapping.hi[stateValue] : stateValue;
        const mappedCondition = currentLang === 'hi' && optionMapping.hi[conditionValue] ? optionMapping.hi[conditionValue] : conditionValue;
        if (mappedValue !== mappedCondition) {
          stepIndex++;
          askNext();
          return;
        }
      }

      qArea.innerHTML = '';
      
      const questionContainer = document.createElement('div');
      questionContainer.style.marginBottom = '15px';
      
      const questionText = document.createElement('div');
      questionText.className = 'bot-text';
      questionText.textContent = s.text;
      questionText.style.marginBottom = '15px';
      questionContainer.appendChild(questionText);
      
      const progressDiv = document.createElement('div');
      progressDiv.className = 'progress-indicator';
      progressDiv.textContent = t('questionOf', stepIndex + 1, steps.length);
      questionContainer.appendChild(progressDiv);
      
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message bot-message';
      const avatar = document.createElement('div');
      avatar.className = 'bot-avatar';
      avatar.textContent = 'ü§ñ';
      messageDiv.appendChild(avatar);
      messageDiv.appendChild(questionContainer);
      conversation.appendChild(messageDiv);

      if (s.options) {
        const div = document.createElement('div');
        div.className = 'options-container';
        div.style.marginTop = '10px';
        s.options.forEach(opt => {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.textContent = opt;
          btn.onclick = () => {
            user(opt);
            // Map Hindi option to English value for backend
            const backendValue = currentLang === 'hi' && optionMapping.hi[opt] ? optionMapping.hi[opt] : opt;
            state[s.key] = backendValue;
            stepIndex++;
            askNext();
          };
          div.appendChild(btn);
        });
        qArea.appendChild(div);
      } else {
        const inputGroup = document.createElement('div');
        inputGroup.className = 'input-group';
        inputGroup.style.marginTop = '10px';
        
        const input = document.createElement('input');
        input.type = 'number';
        input.className = 'number-input';
        input.placeholder = t('enterNumber');
        input.id = 'num_input';
        currentInput = input;
        
        // Add voice input button
        const voiceBtn = document.createElement('button');
        voiceBtn.className = 'voice-btn';
        voiceBtn.innerHTML = 'üé§';
        voiceBtn.title = 'Voice Input';
        voiceBtn.onclick = () => startVoiceInput(input);
        
        const btn = document.createElement('button');
        btn.className = 'submit-btn';
        btn.textContent = t('next');
        btn.onclick = () => {
          const v = input.value;
          const numValue = Number(v || 0);
          user(v || '0');
          state[s.key] = numValue;
          stepIndex++;
          askNext();
        };
        
        input.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            btn.click();
          }
        });
        
        inputGroup.appendChild(input);
        inputGroup.appendChild(voiceBtn);
        inputGroup.appendChild(btn);
        qArea.appendChild(inputGroup);
        setTimeout(() => input.focus(), 100);
      }
      
      optimizedScroll();
    }

    async function sendToBackend() {
      try {
        const payload = { ...state };
        
        // Validate all required fields are filled
        const requiredFields = ['Age', 'Num_of_sexual_partners', 'First_sex_age', 'Num_of_pregnancies'];
        const missingFields = requiredFields.filter(field => state[field] === null || state[field] === undefined);
        
        if (missingFields.length > 0) {
          bot(`Error: Please fill all required fields. Missing: ${missingFields.join(', ')}`, false);
          qArea.innerHTML = '';
          return;
        }
        
        const resp = await fetch('/predict', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(payload)
        });

        let data;
        try {
          data = await resp.json();
        } catch (jsonError) {
          const text = await resp.text();
          throw new Error(`Server error (${resp.status}): ${text || resp.statusText}`);
        }

        qArea.innerHTML = '';

        if (!resp.ok) {
          throw new Error(data.detail || data.message || `HTTP ${resp.status}: ${resp.statusText}`);
        }

        if (data && typeof data === 'object' && data.risk_bucket) {
          const riskClass = (data.risk_bucket || '').toLowerCase();
          const probPercent = data.probability_percent || (data.probability ? (data.probability * 100).toFixed(1) : '0');
          
          const riskText = riskClass === 'low' ? t('riskLow') : riskClass === 'medium' ? t('riskMedium') : t('riskHigh');
          
          // Detailed explanations based on risk level
          let whatThisMeans = '';
          let whatToDo = '';
          
          if (riskClass === 'low') {
            whatThisMeans = 'Your data shows very few or weak risk indicators commonly linked to cervical cancer.';
            whatToDo = '‚Ä¢ Continue routine cervical screening\n‚Ä¢ Maintain preventive practices and regular health check-ups';
          } else if (riskClass === 'medium') {
            whatThisMeans = 'Some moderate risk factors are present, but the overall pattern does not strongly indicate high risk.';
            whatToDo = '‚Ä¢ Follow-up screening is recommended\n‚Ä¢ Consult a healthcare professional for further evaluation';
          } else {
            whatThisMeans = 'The model detected strong patterns associated with cervical cancer risk.';
            whatToDo = '‚Ä¢ Immediate medical consultation is strongly advised\n‚Ä¢ Diagnostic tests such as HPV testing, Pap smear, or biopsy may be required';
          }
          
          const resultHTML = `
            <div style="text-align: center; max-width: 100%;">
              <h3 style="margin-bottom: 20px; font-size: 24px; color: #1f2937;">${t('riskResult')}</h3>
              <div class="risk-badge risk-${riskClass}" style="background: ${data.risk_color || '#6b7280'}; font-size: 18px; padding: 12px 24px; margin-bottom: 20px;">
                ${riskText}
              </div>
              <div style="margin: 25px 0;">
                <div style="font-size: 48px; font-weight: bold; color: ${data.risk_color || '#6b7280'}; margin-bottom: 5px;">
                  ${probPercent}%
                </div>
                <div style="color: #6b7280; font-size: 16px; font-weight: 600;">${t('probability')}</div>
              </div>
              <div class="probability-gauge" style="margin: 20px 0;">
                <div class="probability-fill" style="width: ${probPercent}%; background: ${data.risk_color || '#6b7280'};">
                  ${probPercent >= 10 ? probPercent + '%' : ''}
                </div>
              </div>
              
              <div style="background: #f8f9fa; border-radius: 12px; padding: 20px; margin: 25px 0; text-align: left;">
                <h4 style="color: #1f2937; font-size: 18px; margin-bottom: 12px; font-weight: 700;">What this means</h4>
                <p style="color: #4b5563; line-height: 1.7; font-size: 15px; margin-bottom: 20px;">
                  ${whatThisMeans}
                </p>
                <h4 style="color: #1f2937; font-size: 18px; margin-bottom: 12px; font-weight: 700;">What to do</h4>
                <p style="color: #4b5563; line-height: 1.8; font-size: 15px; white-space: pre-line;">
                  ${whatToDo}
                </p>
              </div>
              
              <div style="background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px; padding: 16px; margin: 20px 0; text-align: left;">
                <p style="color: #92400e; font-size: 14px; line-height: 1.6; margin: 0; font-weight: 600;">
                  ‚ö† <strong>Important Disclaimer</strong><br>
                  This prediction is not a medical diagnosis. It is a risk-assessment and early-warning tool designed to support timely screening and clinical decision-making. Final diagnosis and treatment decisions must always be made by a qualified healthcare professional.
                </p>
              </div>
              
              <p style="margin-top: 15px; font-size: 13px; color: #6b7280;">
                ${t('label')}: ${data.label || 'N/A'} | ${t('confidence')}: ${data.confidence || 'N/A'}
              </p>
              <div style="display: flex; gap: 12px; justify-content: center; margin-top: 25px; flex-wrap: wrap;">
                <button class="explain-btn" onclick="explainPrediction()" style="background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%); font-size: 16px; padding: 16px 32px; min-width: 180px;">${t('whyPrediction')}</button>
                <button class="explain-btn" onclick="saveResult()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); font-size: 16px; padding: 16px 32px; min-width: 180px;">üíæ ${t('saveResult') || 'Save Result'}</button>
                <button class="explain-btn" onclick="downloadPDF()" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); font-size: 16px; padding: 16px 32px; min-width: 180px;">üìÑ ${t('downloadPDF') || 'Download PDF'}</button>
              </div>
            </div>
          `;
          
          // Store result data globally for PDF and save (include profile if available)
          const profileData = currentProfile ? { profile: currentProfile } : {};
          window.lastResult = { ...data, input_data: { ...state }, ...profileData };
          bot(resultHTML, true);
          
          // Auto-save to history
          saveResultToHistory(data);
        } else {
          throw new Error('Invalid response format from server. Expected risk_bucket field.');
        }
      } catch (err) {
        qArea.innerHTML = '';
        console.error('Prediction error:', err);
        const errorMsg = err.message || 'An error occurred while processing your request. Please try again.';
        bot(`‚ùå Error: ${errorMsg}`, false);
      }
    }

    async function explainPrediction() {
      try {
        const payload = { ...state };
        const resp = await fetch('/explain', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(payload)
        });

        const data = await resp.json();
        if (resp.ok) {
          const riskClass = window.lastResult?.risk_bucket?.toLowerCase() || 'low';
          let whatMeans = '';
          let whatToDo = '';
          
          if (riskClass === 'low') {
            whatMeans = 'Your data shows very few or weak risk indicators commonly linked to cervical cancer.';
            whatToDo = '‚Ä¢ Continue routine cervical screening\n‚Ä¢ Maintain preventive practices and regular health check-ups';
          } else if (riskClass === 'medium') {
            whatMeans = 'Some moderate risk factors are present, but the overall pattern does not strongly indicate high risk.';
            whatToDo = '‚Ä¢ Follow-up screening is recommended\n‚Ä¢ Consult a healthcare professional for further evaluation';
          } else {
            whatMeans = 'The model detected strong patterns associated with cervical cancer risk.';
            whatToDo = '‚Ä¢ Immediate medical consultation is strongly advised\n‚Ä¢ Diagnostic tests such as HPV testing, Pap smear, or biopsy may be required';
          }
          
          const explanationHTML = `
            <div style="text-align: left; max-width: 100%;">
              <h4 style="color: #1f2937; font-size: 20px; margin-bottom: 15px; font-weight: 700;">Why this prediction?</h4>
              <div style="background: #f8f9fa; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                <h5 style="color: #1f2937; font-size: 16px; margin-bottom: 10px; font-weight: 700;">What this means:</h5>
                <p style="color: #4b5563; line-height: 1.7; font-size: 15px; margin-bottom: 15px;">
                  ${whatMeans}
                </p>
                <h5 style="color: #1f2937; font-size: 16px; margin-bottom: 10px; font-weight: 700;">What to do:</h5>
                <p style="color: #4b5563; line-height: 1.8; font-size: 15px; white-space: pre-line;">
                  ${whatToDo}
                </p>
              </div>
              ${data.risk_factors && data.risk_factors.length > 0 ? `
                <div style="background: #fef2f2; border-left: 4px solid #ef4444; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                  <h5 style="color: #991b1b; font-size: 15px; margin-bottom: 10px; font-weight: 700;">Risk Factors Identified:</h5>
                  <ul style="color: #7f1d1d; line-height: 1.8; font-size: 14px; margin-left: 20px;">
                    ${data.risk_factors.slice(0, 5).map(factor => `<li>${factor}</li>`).join('')}
                  </ul>
                </div>
              ` : ''}
              ${data.protective_factors && data.protective_factors.length > 0 ? `
                <div style="background: #f0fdf4; border-left: 4px solid #10b981; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                  <h5 style="color: #065f46; font-size: 15px; margin-bottom: 10px; font-weight: 700;">Protective Factors:</h5>
                  <ul style="color: #047857; line-height: 1.8; font-size: 14px; margin-left: 20px;">
                    ${data.protective_factors.slice(0, 3).map(factor => `<li>${factor}</li>`).join('')}
                  </ul>
                </div>
              ` : ''}
              <div style="background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px; padding: 16px; margin-top: 15px;">
                <p style="color: #92400e; font-size: 13px; line-height: 1.6; margin: 0; font-weight: 600;">
                  ‚ö† <strong>Important Disclaimer</strong><br>
                  This prediction is not a medical diagnosis. It is a risk-assessment and early-warning tool designed to support timely screening and clinical decision-making. Final diagnosis and treatment decisions must always be made by a qualified healthcare professional.
                </p>
              </div>
            </div>
          `;
          bot(explanationHTML, true);
        } else {
          bot("Explanation unavailable: " + (data.detail || "Error occurred"));
        }
      } catch (err) {
        bot(t('errorExplanation', err.message));
      }
    }

    // Voice Input/Output
    let recognition = null;
    let synthesis = window.speechSynthesis;

    function initVoiceRecognition() {
      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = currentLang === 'hi' ? 'hi-IN' : 'en-US';
      }
    }

    function startVoiceInput(inputElement) {
      if (!recognition) {
        initVoiceRecognition();
        if (!recognition) {
          alert('Voice recognition not supported in your browser');
          return;
        }
      }

      const voiceBtn = inputElement.nextElementSibling;
      voiceBtn.classList.add('recording');
      voiceBtn.innerHTML = 'üî¥';

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        const number = parseInt(transcript.replace(/\D/g, ''));
        if (!isNaN(number)) {
          inputElement.value = number;
          // Auto-submit
          setTimeout(() => {
            const submitBtn = voiceBtn.nextElementSibling;
            if (submitBtn) submitBtn.click();
          }, 300);
        }
        voiceBtn.classList.remove('recording');
        voiceBtn.innerHTML = 'üé§';
      };

      recognition.onerror = () => {
        voiceBtn.classList.remove('recording');
        voiceBtn.innerHTML = 'üé§';
      };

      recognition.onend = () => {
        voiceBtn.classList.remove('recording');
        voiceBtn.innerHTML = 'üé§';
      };

      recognition.start();
    }

    function speakText(text) {
      if (synthesis) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = currentLang === 'hi' ? 'hi-IN' : 'en-US';
        synthesis.speak(utterance);
      }
    }

    // PDF Generation
    async function downloadPDF() {
      if (!window.lastResult) {
        alert('No result available to download');
        return;
      }

      try {
        // Include profile if available
        const profileId = localStorage.getItem('profileId');
        let profileData = {};
        if (profileId) {
          try {
            const profileResp = await fetch(`/profile/${profileId}`);
            if (profileResp.ok) {
              const profileResult = await profileResp.json();
              profileData = { profile: profileResult.profile };
            }
          } catch (e) {
            console.log('Profile not found, generating PDF without profile');
          }
        }
        
        const resultForPDF = { ...window.lastResult, ...profileData };
        const resp = await fetch('/generate-pdf', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(resultForPDF)
        });

        const data = await resp.json();
        if (resp.ok) {
          // Decode base64 and download
          const link = document.createElement('a');
          link.href = 'data:application/pdf;base64,' + data.pdf_base64;
          link.download = data.filename;
          link.click();
          bot('PDF report downloaded successfully! üìÑ', false);
        } else {
          bot('Error generating PDF: ' + (data.detail || 'Unknown error'), false);
        }
      } catch (err) {
        bot('Error: ' + err.message, false);
      }
    }

    // Save Result
    async function saveResult() {
      if (!window.lastResult) {
        alert('No result to save');
        return;
      }

      try {
        // Include profile if available
        const profileId = localStorage.getItem('profileId');
        let profileData = {};
        if (profileId) {
          try {
            const profileResp = await fetch(`/profile/${profileId}`);
            if (profileResp.ok) {
              const profileResult = await profileResp.json();
              profileData = { profile: profileResult.profile };
            }
          } catch (e) {
            console.log('Profile not found, saving without profile');
          }
        }
        
        const resultToSave = { ...window.lastResult, ...profileData };
        const resp = await fetch('/save-result', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(resultToSave)
        });

        const data = await resp.json();
        if (resp.ok) {
          bot('‚úÖ Result saved to history!', false);
        } else {
          bot('Error saving: ' + (data.detail || 'Unknown error'), false);
        }
      } catch (err) {
        bot('Error: ' + err.message, false);
      }
    }

    async function saveResultToHistory(result) {
      try {
        await fetch('/save-result', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ ...result, input_data: { ...state } })
        });
      } catch (err) {
        console.error('Auto-save failed:', err);
      }
    }

    // Profile Management
    let currentProfile = null;

    function showProfile() {
      const modal = document.getElementById('profileModal') || createModal('profileModal', 'User Profile');
      modal.style.display = 'flex';
      loadProfile();
    }

    function createModal(id, title) {
      const modal = document.createElement('div');
      modal.id = id;
      modal.className = 'modal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <h2>${title}</h2>
            <button class="close-btn" onclick="document.getElementById('${id}').style.display='none'">&times;</button>
          </div>
          <div id="${id}Content"></div>
        </div>
      `;
      document.body.appendChild(modal);
      return modal;
    }

    async function loadProfile() {
      const content = document.getElementById('profileModalContent');
      const profileId = localStorage.getItem('profileId') || 'default';
      
      try {
        const resp = await fetch(`/profile/${profileId}`);
        const data = await resp.json();
        if (resp.ok) {
          currentProfile = data.profile;
          content.innerHTML = `
            <form onsubmit="saveProfile(event)">
              <input type="text" name="name" placeholder="Name" value="${currentProfile.name || ''}" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;">
              <input type="email" name="email" placeholder="Email" value="${currentProfile.email || ''}" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;">
              <input type="tel" name="phone" placeholder="Phone" value="${currentProfile.phone || ''}" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;">
              <button type="submit" class="submit-btn" style="width: 100%; margin-top: 10px;">Save Profile</button>
            </form>
          `;
        } else {
          content.innerHTML = `
            <form onsubmit="saveProfile(event)">
              <input type="text" name="name" placeholder="Name" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;">
              <input type="email" name="email" placeholder="Email" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;">
              <input type="tel" name="phone" placeholder="Phone" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #ddd;">
              <button type="submit" class="submit-btn" style="width: 100%; margin-top: 10px;">Create Profile</button>
            </form>
          `;
        }
      } catch (err) {
        content.innerHTML = `<p>Error loading profile: ${err.message}</p>`;
      }
    }

    async function saveProfile(event) {
      event.preventDefault();
      const formData = new FormData(event.target);
      const profileData = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone')
      };

      try {
        const resp = await fetch('/profile', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(profileData)
        });

        const data = await resp.json();
        if (resp.ok) {
          localStorage.setItem('profileId', data.profile_id);
          currentProfile = data.profile;
          bot('‚úÖ Profile saved successfully!', false);
          document.getElementById('profileModal').style.display = 'none';
        } else {
          bot('Error saving profile: ' + (data.detail || 'Unknown error'), false);
        }
      } catch (err) {
        bot('Error: ' + err.message, false);
      }
    }

    // History View
    async function showHistory() {
      const modal = document.getElementById('historyModal') || createModal('historyModal', 'Assessment History');
      modal.style.display = 'flex';
      loadHistory();
    }

    async function loadHistory() {
      const content = document.getElementById('historyModalContent');
      content.innerHTML = '<p>Loading history...</p>';

      try {
        const resp = await fetch('/history?limit=20');
        const data = await resp.json();
        
        if (data.history && data.history.length > 0) {
          let html = '<div style="max-height: 400px; overflow-y: auto;">';
          data.history.forEach(item => {
            const date = new Date(item.timestamp).toLocaleDateString();
            const risk = item.risk_bucket || 'Unknown';
            html += `
              <div style="padding: 15px; margin: 10px 0; background: #f8f9fa; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between;">
                  <strong>${date}</strong>
                  <span class="risk-badge risk-${risk.toLowerCase()}" style="background: ${item.risk_color || '#6b7280'};">${risk}</span>
                </div>
                <p style="margin-top: 5px; color: #6b7280;">Probability: ${item.probability_percent || 0}%</p>
              </div>
            `;
          });
          html += '</div>';
          content.innerHTML = html;
        } else {
          content.innerHTML = '<p>No history found. Complete an assessment to see your history here.</p>';
        }
      } catch (err) {
        content.innerHTML = `<p>Error loading history: ${err.message}</p>`;
      }
    }

    // Initialize voice recognition
    initVoiceRecognition();

    // Start conversation
    bot(t('hello'));
    // Speak welcome message
    setTimeout(() => speakText(t('hello')), 500);
    askNext();
  </script>
</body>
</html>

